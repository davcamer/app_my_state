<html>
<head>
  <title>Google maps example</title>

  <style>
    #map {width:600px;height:400px;}
    #categories {float:right;}
    #category_list {border: 2px solid #000;}
    #category_list ul {list-style: none inside;}
    #category_list li {list-style-type: none; margin: 5px;}
  </style>
  
    <script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAqWWYRzzIpnWhU1fLcO47mRTJQa0g3IQ9GZqIMmInSLzwtGDKaBSIS5bxhaXo0xdAaGYI6fOtXZbxww" type="text/javascript"></script>
    <script src="/javascripts/markermanager.js"></script>
    <script src="/javascripts/data.js"></script>
    <script src="/javascripts/jquery-1.4.2.js"></script>

    <script type="text/javascript">
        function createMarker(point,html) {
            var marker = new GMarker(point);
            GEvent.addListener(marker, "click", function() {
              marker.openInfoWindowHtml(html);
            });
            return marker;
        }

        function initialize() {
            var map = new GMap2(document.getElementById("map"));
            map.setCenter(new GLatLng(-37.8062649904, 144.96165842), 10);
            map.setUIToDefault();

            var horseTroughMgr = new MarkerManager(map);
            var horseTroughMarkers = [];
            var i = Horse_Trough.length;
            while (i--) {
              var trough = Horse_Trough[i];
              var point = new GLatLng(trough.latitude, trough.longitude);
              var marker = createMarker(point,'<h4>' + trough.category + '</h4>');
              horseTroughMarkers.push(marker);
              horseTroughMgr.addMarker(marker, 0);
            }
            horseTroughMgr.refresh();

            var litterBinMgr = new MarkerManager(map);
            var i = Litter_Bin.length;
            while (i--) {
              var bin = Litter_Bin[i];
              var point = new GLatLng(bin.latitude, bin.longitude);
              var marker = createMarker(point,'<h4>' + bin.category + '</h4>');
              litterBinMgr.addMarker(marker, 19);
            }
            litterBinMgr.refresh();

            var hoopMgr = new MarkerManager(map);
            var i = Hoop.length;
            while (i--) {
              var hoop = Hoop[i];
              var point = new GLatLng(hoop.latitude, hoop.longitude);
              var marker = createMarker(point,'<h4>' + hoop.category + '</h4>');
              hoopMgr.addMarker(marker, 15);
            }
            hoopMgr.refresh();

            var informationPillarMgr = new MarkerManager(map);
            var i = Information_Pillar.length;
            while (i--) {
              var info = Information_Pillar[i];
              var point = new GLatLng(info.latitude, info.longitude);
              var marker = createMarker(point,'<h4>' + info.category + '</h4>');
              informationPillarMgr.addMarker(marker, 0);
            }
            informationPillarMgr.refresh();

            var seatMgr = new MarkerManager(map);
            var i = Seat.length;
            while (i--) {
              var seat = Seat[i];
              var point = new GLatLng(seat.latitude, seat.longitude);
              var marker = createMarker(point,'<h4>' + seat.category + '</h4>');
              seatMgr.addMarker(marker, 19);
            }
            seatMgr.refresh();

            var drinkingFountainMgr = new MarkerManager(map);
            var i = Drinking_Fountain.length;
            while (i--) {
              var drink = Drinking_Fountain[i];
              var point = new GLatLng(drink.latitude, drink.longitude);
              var marker = createMarker(point,'<h4>' + drink.category + '</h4>');
              drinkingFountainMgr.addMarker(marker, 15);
            }
            drinkingFountainMgr.refresh();

            var picnicSettingMgr = new MarkerManager(map);
            var i = Picnic_Setting.length;
            while (i--) {
              var picnic = Picnic_Setting[i];
              var point = new GLatLng(picnic.latitude, picnic.longitude);
              var marker = createMarker(point,'<h4>' + picnic.category + '</h4>');
              picnicSettingMgr.addMarker(marker, 14);
            }
            picnicSettingMgr.refresh();

            var bicycleRailMgr = new MarkerManager(map);
            var i = Bicycle_Rails.length;
            while (i--) {
              var rails = Bicycle_Rails[i];
              var point = new GLatLng(rails.latitude, rails.longitude);
              var marker = createMarker(point,'<h4>' + rails.category + '</h4>');
              bicycleRailMgr.addMarker(marker, 17);
            }
            bicycleRailMgr.refresh();

            var binCorralMgr = new MarkerManager(map);
            var i = Bin_Corral.length;
            while (i--) {
              var corral = Bin_Corral[i];
              var point = new GLatLng(corral.latitude, corral.longitude);
              var marker = createMarker(point,'<h4>' + corral.category + '</h4>');
              binCorralMgr.addMarker(marker, 14);
            }
            binCorralMgr.refresh();

            var recreationEquipmentItemMgr = new MarkerManager(map);
            var i = Recreation_Equipment_Item.length;
            while (i--) {
              var equipment = Recreation_Equipment_Item[i];
              var point = new GLatLng(equipment.latitude, equipment.longitude);
              var marker = createMarker(point,'<h4>' + equipment.category + '</h4>');
              recreationEquipmentItemMgr.addMarker(marker, 12);
            }
            recreationEquipmentItemMgr.refresh();

            var barbequeMgr = new MarkerManager(map);
            var i = Barbeque.length;
            while (i--) {
              var bbq = Barbeque[i];
              var point = new GLatLng(bbq.latitude, bbq.longitude);
              var marker = createMarker(point,'<h4>' + bbq.category + '</h4>');
              barbequeMgr.addMarker(marker, 14);
            }
            barbequeMgr.refresh();


            $("#category_list input[name='trough']").bind("change", {manager: horseTroughMgr, list: horseTroughMarkers}, function(event) {
                if (this.checked) {
                    markers = event.data.list;
                    mgr = event.data.manager;
                    var i = markers.length;
                    while (i--) {
                        mgr.addMarker(markers[i], 0);    
                    }
                    mgr.refresh();
                } else {
                    event.data.manager.clearMarkers();
                }
            })
        }

        $(initialize);
    </script>

</head>
<body>
<div id="container">
Here's the map:
<!-- This is the element in which the map will be displayed. -->
<div id="categories">
  <form name="category_toggles">
    <ul id="category_list">
      <li><input type="checkbox" name="trough"><label for="trough">Horse Troughs</label></li>
      <li><input type="checkbox" name="bin"><label for="bin">Rubbish Bins</label></li>
      <li><input type="checkbox" name="hoop"><label for="hoop">Hoops</label></li>
      <li><input type="checkbox" name="info"><label for="info">Information Pillars</label></li>
      <li><input type="checkbox" name="seat"><label for="seat">Seats</label></li>
      <li><input type="checkbox" name="drink"><label for="drink">Drinking Fountains</label></li>
      <li><input type="checkbox" name="picnic"><label for="picnic">Picnic Settings</label></li>
      <li><input type="checkbox" name="rails"><label for="rails">Bicycle Rails</label></li>
      <li><input type="checkbox" name="corral"><label for="corral">Bin Corrals</label></li>
      <li><input type="checkbox" name="equip"><label for="equip">Recreation Equipment Item</label></li>
      <li><input type="checkbox" name="bbq"><label for="bbq">Barbeque</label></li>
    </ul>
  </form>
</div>
<div id="map"></div>

</div>
</body>
</html>