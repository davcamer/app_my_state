<html>
<head>
  <title>Google maps example</title>
    <script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAqWWYRzzIpnWhU1fLcO47mRTJQa0g3IQ9GZqIMmInSLzwtGDKaBSIS5bxhaXo0xdAaGYI6fOtXZbxww" type="text/javascript"></script>
    <script src="/javascripts/markermanager.js"></script>

    <script type="text/javascript">
        function createMarker(point,html) {
            var marker = new GMarker(point);
            GEvent.addListener(marker, "click", function() {
              marker.openInfoWindowHtml(html);
            });
            return marker;
        }

        function initialize() {
            var map = new GMap2(document.getElementById("map"));
            map.setCenter(new GLatLng(-37.811438, 145.079277), 15);
            map.setUIToDefault();
            
            var manager = new MarkerManager(map);

            <%@places.each do |place|%>
            var point = new GLatLng(<%=place[:latitude]%>,<%=place[:longitude]%>);
            var marker = createMarker(point,'<h4><%=h place[:description]%></h4>')
            manager.addMarker(marker);
            <%end%>
        }
    </script>

</head>
<body onload="initialize()">

Here's the map:
<!-- This is the element in which the map will be displayed. -->
<div id="map" style="width: 450px; height: 350px"></div>

</body>
</html>